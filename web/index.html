<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Connected Subgraph Problem</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      font-size: 14px;
      background: #f0f2f5;
      color: #222;
      min-height: 100vh;
    }

    header {
      background: #1a1a2e;
      color: #eee;
      padding: 14px 24px;
    }
    header h1 { font-size: 1.25rem; font-weight: 600; }
    header p  { font-size: 0.8rem; opacity: 0.65; margin-top: 3px; }

    .layout {
      display: flex;
      gap: 18px;
      padding: 18px;
      max-width: 1200px;
      margin: 0 auto;
      align-items: flex-start;
    }

    /* ---- LEFT: params ---- */
    .panel-params {
      flex: 0 0 260px;
      background: #fff;
      border-radius: 10px;
      padding: 18px;
      box-shadow: 0 2px 8px rgba(0,0,0,.08);
    }
    .panel-params h2 {
      font-size: .95rem;
      border-bottom: 2px solid #e3e6f0;
      padding-bottom: 8px;
      margin-bottom: 14px;
    }

    .section-title {
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .06em;
      color: #999;
      margin: 12px 0 7px;
    }

    .field { margin-bottom: 12px; }
    .field label {
      display: block;
      font-weight: 600;
      font-size: .8rem;
      color: #444;
      margin-bottom: 3px;
    }
    .field .hint { font-size: .7rem; color: #888; margin-top: 2px; }

    .row2 { display: flex; gap: 7px; }
    .row2 .field { flex: 1; }

    input[type="number"] {
      width: 100%;
      padding: 6px 9px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: .88rem;
      outline: none;
      transition: border-color .2s;
    }
    input[type="number"]:focus { border-color: #5c7cfa; }

    #run-btn {
      width: 100%;
      padding: 9px;
      background: #5c7cfa;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: .95rem;
      font-weight: 700;
      cursor: pointer;
      margin-top: 10px;
      transition: background .15s, opacity .15s;
    }
    #run-btn:hover:not(:disabled) { background: #3b5bdb; }
    #run-btn:disabled { opacity: .5; cursor: not-allowed; }

    #error-box {
      display: none;
      margin-top: 8px;
      background: #fff3f3;
      border: 1px solid #f5a5a5;
      border-radius: 6px;
      padding: 7px 9px;
      font-size: .8rem;
      color: #c0392b;
    }

    /* ---- RIGHT: result ---- */
    .panel-result {
      flex: 1;
      min-width: 0;
    }

    .result-card {
      background: #fff;
      border-radius: 10px;
      padding: 18px;
      box-shadow: 0 2px 8px rgba(0,0,0,.08);
      margin-bottom: 14px;
    }

    #placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 260px;
      color: #bbb;
      font-size: .95rem;
    }

    #grid-canvas { display: none; border-radius: 4px; }

    /* Progress */
    .progress-wrap {
      margin-top: 12px;
    }
    .progress-track {
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      overflow: hidden;
    }
    #progress-bar {
      height: 100%;
      width: 0%;
      background: #5c7cfa;
      transition: width .3s ease;
      border-radius: 4px;
    }
    #progress-label {
      display: block;
      font-size: .78rem;
      color: #666;
      margin-top: 5px;
    }

    /* Meta chips */
    #meta-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }
    .chip {
      background: #f0f4ff;
      border: 1px solid #d0d9ff;
      border-radius: 20px;
      padding: 3px 11px;
      font-size: .78rem;
      color: #3b5bdb;
    }

    /* Stats */
    #stats-area { display: none; }
    #stats-area h3 { font-size: .88rem; margin-bottom: 8px; color: #444; }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: .8rem;
    }
    thead th {
      background: #f8f9fa;
      text-align: left;
      padding: 6px 10px;
      border-bottom: 2px solid #dee2e6;
      font-weight: 700;
      color: #555;
    }
    tbody tr:nth-child(even) { background: #fafafa; }
    tbody td { padding: 6px 10px; border-bottom: 1px solid #eee; }

    .color-dot {
      display: inline-block;
      width: 10px; height: 10px;
      border-radius: 50%;
      margin-right: 5px;
      vertical-align: middle;
      border: 1px solid rgba(0,0,0,.15);
    }
    .satisfied     { color: #2ecc71; font-weight: 700; }
    .not-satisfied { color: #e74c3c; font-weight: 700; }

    @media (max-width: 820px) {
      .layout { flex-direction: column; }
      .panel-params { flex: none; width: 100%; }
    }
  </style>
</head>
<body>

<header>
  <h1>Connected Subgraph Problem — Heuristic Solver</h1>
  <p>Greedy initial assignment + local search (minimize inter-player boundary edges) · runs entirely in your browser</p>
</header>

<div class="layout">

  <!-- PARAMS -->
  <aside class="panel-params">
    <h2>Parameters</h2>

    <p class="section-title">Grid</p>
    <div class="field">
      <label for="inp-n">Grid size n (n × n)</label>
      <input type="number" id="inp-n" value="12" min="5" max="20" />
      <div class="hint">5 – 20</div>
    </div>
    <div class="field">
      <label for="inp-m">Players m</label>
      <input type="number" id="inp-m" value="12" min="2" max="15" />
      <div class="hint">2 – 15</div>
    </div>

    <p class="section-title">Cell score range</p>
    <div class="row2">
      <div class="field">
        <label for="inp-cv-min">Min</label>
        <input type="number" id="inp-cv-min" value="10" min="1" />
      </div>
      <div class="field">
        <label for="inp-cv-max">Max</label>
        <input type="number" id="inp-cv-max" value="20" min="1" />
      </div>
    </div>

    <p class="section-title">Requirement range</p>
    <div class="row2">
      <div class="field">
        <label for="inp-req-min">Min</label>
        <input type="number" id="inp-req-min" value="150" min="0" />
      </div>
      <div class="field">
        <label for="inp-req-max">Max</label>
        <input type="number" id="inp-req-max" value="200" min="0" />
      </div>
    </div>

    <p class="section-title">Solver</p>
    <div class="field">
      <label for="inp-seed">Random seed</label>
      <input type="number" id="inp-seed" value="4" min="0" />
    </div>
    <div class="field">
      <label for="inp-max-iter">Max iterations</label>
      <input type="number" id="inp-max-iter" value="100000" min="1000" max="500000" step="1000" />
      <div class="hint">1,000 – 500,000</div>
    </div>

    <button id="run-btn" type="button">Run Solver</button>
    <div id="error-box"></div>
  </aside>

  <!-- RESULT -->
  <main class="panel-result">

    <div class="result-card">
      <div id="placeholder">Set parameters and click Run Solver.</div>
      <canvas id="grid-canvas"></canvas>
      <div class="progress-wrap">
        <div class="progress-track"><div id="progress-bar"></div></div>
        <span id="progress-label"></span>
      </div>
      <div id="meta-chips"></div>
    </div>

    <div class="result-card" id="stats-area">
      <h3>Player Scores vs Requirements</h3>
      <table id="stats-table">
        <thead>
          <tr>
            <th>Player</th>
            <th>Score</th>
            <th>Requirement</th>
            <th>Surplus / Deficit</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

  </main>
</div>

<script type="module" src="/src/main.ts"></script>
</body>
</html>
